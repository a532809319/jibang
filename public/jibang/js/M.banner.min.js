/*!
*作者：杜小青
*说明：	Q库
*时间：2015-10
*url: http://www.aifou.net http://q.34mo.com
*/
;(function($){function Q(id){return new Q.fn($(id))}function extendFn(i,ziobj){if(typeof Q.fn[i]!="function"){Q.fn[i]=function(){}}Q.fn.prototype[i]=function(obj){var $this=new Q.fn[i]();$this.$doc=this.__doc__;try{var fun=eval("c_"+i);return fun.call($this,obj)}catch(err){eval("function c_"+i+"( userobj ){this.obj = {};$.extend( this.obj, userobj );if( typeof this['style_' + this.obj.style] == 'function' ){this['style_' + this.obj.style]( this.obj );};if( typeof this['init_' + this.obj.style] == 'function' ){this['init_' + this.obj.style]( this.obj );};return this;}");var fun=eval("c_"+i)}return fun.call($this,obj)};for(var j in ziobj){Q.fn[i].prototype[j]=ziobj[j]}}Q.fn=function(__doc__){this.__doc__=__doc__};Q.extend=function(obj){if(typeof obj=="object"){for(var i in obj){var ziobj=obj[i];var type=typeof ziobj;if(type=="object"){extendFn(i,ziobj)}else{if(type=="function"){Q[i]=ziobj}}}}};Q.GetRandomNum=function(Min,Max){var Range=Max-Min;var Rand=Math.random();return(Min+Math.round(Rand*Range))};Q.zero_fill_hex=function(num,digits){var s=num.toString(16);while(s.length<digits){s="0"+s}return s};Q.rgb2hex=function(rgb){if(rgb.charAt(0)=="#"){return rgb}var ds=rgb.split(/\D+/);var decimal=Number(ds[1])*65536+Number(ds[2])*256+Number(ds[3]);return"#"+Q.zero_fill_hex(decimal,6)};extendFn("slide",{});function c_slide(userobj){this.obj={width:1000,height:800,style:"leftslide",on:"click",page:1,speed:600,time:2000,auto:true,autowh:false,showtitle:true};$.extend(this.obj,userobj);var mthis=this;this.page=this.obj.page-1;this.$doc.width(this.obj.width);this.$doc.height(this.obj.height);this.$q_listtag=$(".q-slide-listtag",this.$doc);this.$q_listul=$(".q-slide-listul",this.$q_listtag);this.$proli=$("li",this.$q_listul);this.$proimg=$("img",this.$proli);this.lilen=this.$proli.length;this.ulwidth=this.obj.width*this.lilen;this.$q_listtag.css({width:this.obj.width,height:this.obj.height,overflow:"hidden"});this.$q_listul.css({width:this.ulwidth});this.$proli.css({width:this.obj.width,height:this.obj.height,overflow:"hidden"});var navhtml='<div class="q-slide-navbox"><ul class="q-slide-navul">';for(var i=1;i<=this.lilen;i++){navhtml+="<li>"+i+"</li>"}navhtml+="</ul></div>";this.$doc.append(navhtml);this.navli=$(".q-slide-navul li",this.$doc);this.navli[this.obj.on](function(){mthis.page=$(this).index();slideplay()});var interval;function autoplay(){if(mthis.obj.auto){interval=setInterval(function(){mthis.page++;if(mthis.page==mthis.lilen){mthis.page=0}slideplay()},mthis.obj.time)}}function slideplay(){if(typeof mthis["style_"+mthis.obj.style]=="function"){mthis["style_"+mthis.obj.style](mthis.obj)}mthis.navonstyle();if(typeof mthis.showtitle=="function"){mthis.showtitle()}}this.$doc.hover(function(){clearInterval(interval)},function(){autoplay()});this.navonstyle=function(){this.navli.eq(this.page).addClass("on").siblings().removeClass("on")};this.style_leftslide=function(){this.$doc.addClass("q-slide-leftslide");var magleft=this.page*this.obj.width*-1;this.$q_listul.stop().animate({"margin-left":magleft+"px"},this.obj.speed)};this.autowh=function(){var mthis=this;this.$q_listul.hide();mthis.$doc.css({width:"auto",height:"auto"});var imgw,imgh;if(this.lilen>0){var img=new Image();img.src=$("img:eq(0)",this.$proli).attr("src");img.onload=function(){imgh=this.height;imgw=this.width;$(window).resize(function(){aotowh()});$("a",mthis.$proli).css({display:"block"});$("img",mthis.$proli).css({width:"100%"});aotowh();mthis.$q_listul.show()}}function aotowh(){var w=mthis.$doc.width();var h=(imgh/imgw)*w;mthis.obj.width=w;mthis.obj.height=h;mthis.ulwidth=w*mthis.lilen;mthis.$q_listul.css({width:mthis.ulwidth,height:h,overflow:"hidden"});mthis.$q_listtag.css({width:w,height:h});mthis.$proli.css({width:w,height:h})}};if(this.obj.autowh){this.$doc.addClass("autowh");this.autowh()}if(this.obj.showtitle){var hreflink;var linknav='<div class="q-slide-linknavp">';for(var i=0;i<this.lilen;i++){hreflink=$("a",this.$proli.eq(i)).attr("title");if(hreflink==undefined){hreflink=$("img",this.$proli.eq(i)).attr("alt")}var isUndefined="";if(hreflink==undefined){isUndefined=" q-slide-undefined"}linknav+='<div class="q-slide-title'+isUndefined+'"><p class="q-slide-titlebg"></p><p class="q-slide-titletxt">'+hreflink+"</p></div>"}linknav+="</div>";this.$doc.append(linknav);$(".q-slide-linknavp .q-slide-title",this.$doc).hide();this.showtitle=function(){var title=$(".q-slide-linknavp .q-slide-title:eq("+this.page+")",this.$doc);title.siblings().hide(300);if(!title.hasClass("q-slide-undefined")){title.show(300)}}}if(typeof this["init_"+this.obj.style]=="function"){this["init_"+this.obj.style](this.obj)}autoplay();slideplay();return this}extendFn("move",{});function c_move(userobj){this.obj={ulwidth:900,liwidth:300,n:2,page:1,time:3000,speed:1000,style:"move",auto:true};$.extend(this.obj,userobj);var mthis=this;mthis.ulwidth=mthis.obj.ulwidth;mthis.liwidth=this.obj.liwidth;mthis.$move=$(".q-move-movemidd",this.$doc);mthis.$moveul=$("ul",mthis.$move);mthis.$moveli=$("li",mthis.$moveul);mthis.linumber=mthis.$moveli.length;mthis.ulsum=mthis.linumber*this.obj.liwidth;mthis.$moveleft=$(".q-move-moveleft img",this.$doc);mthis.$moveright=$(".q-move-moveright img",this.$doc);mthis.maxpage=Math.ceil(mthis.linumber/this.obj.n);mthis.$moveli.width(this.obj.liwidth);mthis.$moveul.width(mthis.ulsum);var interval;function autoplay(){if(mthis.obj.auto){interval=setInterval(function(){mthis.obj.page=parseInt(mthis.obj.page);mthis.obj.page++;movepage()},mthis.obj.time)}}autoplay();this.$doc.hover(function(){clearInterval(interval)},function(){autoplay()});function movepage(){if(mthis.obj.page<=0){mthis.obj.page=mthis.maxpage}else{if(mthis.obj.page>mthis.maxpage){mthis.obj.page=1}}if(typeof mthis["style_"+mthis.obj.style]=="function"){mthis["style_"+mthis.obj.style](mthis.obj)}}mthis.$moveleft.click(function(){mthis.obj.page--;movepage()});mthis.$moveright.click(function(){mthis.obj.page++;movepage()});this.style_move=function(obj){if(mthis.obj.page==0){mthis.obj.page=1}else{if(mthis.obj.page>=mthis.maxpage){mthis.obj.page=mthis.maxpage}}mthis.p=mthis.obj.page-1;mthis.w=-1*mthis.obj.n*mthis.obj.liwidth*mthis.p;mthis.mw=mthis.obj.ulwidth-mthis.ulsum;if(mthis.mw>mthis.w){mthis.w=mthis.mw}mthis.$moveul.stop().animate({"margin-left":mthis.w+"px"},mthis.obj.speed)};return this}extendFn("placeholder",{});function c_placeholder(userobj){var $this=$("[placeholder]",this.$doc);if(typeof $this.q_placeholder=="function"){$this.q_placeholder(userobj)}return this}extendFn("test",{});function c_test(userobj){this.obj={};$.extend(this.obj,userobj);alert(this.obj.style);alert(this.$doc.html());return this}window.Q=Q})(jQuery);$(function(){var str=$("body").html();str.replace(/q-([^ 	=]+)=[^	'"]*("|')([\w$]+)\2?/gi,function(a1,a2,a3,a4,a5){qeach(a1,a2,a4)});function qeach(id,name,tag){$("["+id+"]").each(function(index,element){var $this=$(this);var o=$this.attr("q-"+name+"-data");var obj={};if(o){try{obj=eval("["+o+"]")[0]}catch(err){alert("q-"+name+'-data="'+o+'" 数据格式错误');obj={}}}obj.style=tag;$(this).removeAttr("q-"+name);$(this).removeAttr("q-"+name+"-data");if(typeof Q(this)[name]=="function"){Q(this)[name](obj)}})}});(function(a){a.fn.extend({q_placeholder:function(b){var f={color:false,form:"form"};a.extend(f,b);var d;d=false;var c;if(this.selector){c=a(this)}else{c=a("[placeholder]")}a(f.form).on("submit q-submit",function(){if(a("[q-focus]").index()!=-1){e(a("[q-focus]"),true)}var h=[];a("[q-placeholder]",this).each(function(i,j){var k=a(this);if(k.data("q-empty")){k.val("");h.push(k)}});setTimeout(function(){a.each(h,function(i,j){if(!j.is(":focus")){j.val(j.data("q-placeholder"))}})},0)});var g=0;c.each(function(j,k){var m=a(this);var h=m.attr("placeholder");m.removeAttr("placeholder");if(typeof h!="undefined"&&m.val()==""){m.data("q-placeholder",h);m.data("q-empty",true);m.data("q-type",m.attr("type"));m.attr("type","text");var i=m.css("color");if(!f.color){var l=Q.rgb2hex(i).split("#");f.color="#"+(parseInt("0x"+l[1])+5921370).toString(16)}if(!d){m.attr("q-placeholder",g++);m.val(h);m.css({color:f.color});m.bind("focus",function(){if(m.data("q-empty")){m.val("");m.attr("type",m.data("q-type"));m.attr("q-focus",true);m.css("color",i)}});m.bind("blur",function(){e(m)})}}});function e(i,h){if(i.val()==""){i.css({color:f.color});i.data("q-empty",true);if(!h){setTimeout(function(){i.attr("type","text");i.val(i.data("q-placeholder"))},300)}}else{i.data("q-empty",false)}i.removeAttr("q-focus")}}})})(jQuery);Q.extend({slide:{init_blinds:function(){var a={n:10};this.obj=$.extend(a,this.obj);this.$doc.addClass("q-slide-blinds");if($(".q-slide-blinds-bg",this.$doc).index()=="-1"){this.$q_listtag.append('<div class="q-slide-blinds-showbox"></div><div class="q-slide-blinds-bg"></div>')}},style_blinds:function(){var c=this;var j=$("img",this.$proli.eq(this.page)).attr("src");var b;if(this.page==0){b=this.lilen-1}else{b=this.page-1}var f=$("img",this.$proli.eq(b)).attr("src");$(".q-slide-blinds-bg",this.$doc).css({background:"url("+j+") no-repeat"});var g="s_"+Q.GetRandomNum(0,5);var a=$(".q-slide-blinds-showbox",this.$doc);a.children().remove();var h=this.obj.width/this.obj.n;var e=this.obj.height/this.obj.n;this.s_0=function(k){var l=k*h;a.append('<div style="width:'+h+"px;left:"+l+"px;background:url("+f+") -"+l+'px top no-repeat; position:absolute; top:0px; height:100%;"></div>');var m=a.children(":last");setTimeout(function(){m.animate({top:"-"+c.obj.height+"px",width:(h-10)+"px"},function(){m.remove()})},Q.GetRandomNum(0,9)*100)};this.s_1=function(k){var l=k*e;a.append('<div style="width:100%;height:'+e+"px;top:"+l+"px;background:url("+f+") left -"+l+'px  no-repeat; position:absolute; left:0px;"></div>');var m=a.children(":last");setTimeout(function(){m.animate({left:"-"+c.obj.width+"px",height:(e-10)+"px"},function(){m.remove()})},Q.GetRandomNum(0,9)*100)};this.s_2=function(k){var l=k*h;a.append('<div style="width:'+h+"px;left:"+l+"px;background:url("+f+") -"+l+'px top no-repeat; position:absolute; top:0px; height:100%;"></div>');var m=a.children(":last");setTimeout(function(){m.animate({width:(h-5)+"px",filter:"alpha(opacity=0)","-moz-opacity":0,opacity:0},function(){m.remove()})},Q.GetRandomNum(0,9)*100)};this.s_3=function(k){var l=k*e;a.append('<div style="width:100%;height:'+e+"px;top:"+l+"px;background:url("+f+") left -"+l+'px  no-repeat; position:absolute; left:0px;"></div>');var m=a.children(":last");setTimeout(function(){m.animate({width:(h-5)+"px",filter:"alpha(opacity=0)","-moz-opacity":0,opacity:0},function(){m.remove()})},Q.GetRandomNum(0,9)*100)};this.s_4=function(k){var l=k*e;a.append('<div style="width:100%;height:100%;top:0px;background:url('+f+') left 0px  no-repeat; position:absolute; left:0px;"></div>');var m=a.children(":last");setTimeout(function(){m.animate({width:"0px",height:"0px",left:c.obj.width/2+"px",top:c.obj.height/2+"px"},900,function(){m.remove()})},0)};this.s_5=function(k){var l=k*e;a.append('<div style="width:100%;height:'+e+"px;top:"+l+"px;background:url("+f+") left -"+l+'px  no-repeat; position:absolute; left:0px;"></div>');var m=a.children(":last");setTimeout(function(){m.animate({left:"-"+c.obj.width+"px"},function(){m.remove()})},k*100)};this.s_6=function(k){var l=k*e;a.append('<div style="width:100%;height:'+e+"px;top:"+l+"px;background:url("+f+") left -"+l+'px  no-repeat; position:absolute; left:0px;"></div>');var m=a.children(":last");setTimeout(function(){m.animate({left:"-"+c.obj.width+"px",top:(c.obj.height*-0.5)+"px",filter:"alpha(opacity=0)","-moz-opacity":0,opacity:0},1000,function(){m.remove()})},k*1000)};if(g=="s_4"){this.s_4(0)}else{for(var d=0;d<c.obj.n;d++){this[g](d)}}}}});Q.extend({slide:{style_fadeupslide:function(){this.$doc.addClass("q-slide-fadeupslide");var b=this.page*this.obj.height*-1;this.$q_listul.css({"margin-top":b+"px"});var a=$(".block","#navblock");a.css({background:"#0F0",filter:"alpha(opacity=80)",opacity:0.7});this.$proli.css({opacity:0.0001}).fadeIn(1000);this.$proli.fadeTo(this.obj.spend,0.7)},style_fadelrslide:function(){var b=this;var c={widthh:100};$.extend(c,b.obj);this.$doc.addClass("q-slide-fadelrslide");this.obj.width=b.obj.widthh+"%";var a=b.page*b.obj.widthh*-1;this.$proli.width(this.width);this.$q_listul.css({width:this.width,left:a+"%"})}}});Q.extend({slide:{style_upslide:function(){this.$doc.addClass("q-slide-upslide");var a=this.page*this.obj.height*-1;this.$q_listul.stop().animate({"margin-top":a+"px"},this.obj.speed)}}});